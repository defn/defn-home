#!/usr/bin/env bash

function pre_app_bootstrap {
  git submodule update --init --recursive
}

function bootstrap {
  local shome="$(unset CDPATH; cd -P -- "$(dirname -- "$BASH_SOURCE")/.." && pwd -P)"
  cd "$shome"

  export APP_PATH="$shome/work"
  source "$APP_PATH/app/script/profile"
  source "$shomescript/profile"

  echo info app compile gitsubmodule
  app compile definitions

  require pkgsrc
  app compile bmake
  app compile pkgsrc misc/getopt

  app compile pkg 'https://haskell.org/platform/download/7.10.2/Haskell%20Platform%207.10.2-a1%2064bit-signed.pkg'
  app compile dmg 'http://xquartz.macosforge.org/downloads/SL/XQuartz-2.7.7.dmg' XQuartz-2.7.7 XQuartz.pkg
}

echo pre_app_bootstrap
bootstrap
