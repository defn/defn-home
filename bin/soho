#!/usr/bin/env bash

function main {
  local shome="$(cd -P -- "${BASH_SOURCE%/*}/.." && pwd -P)"
  source "$shome/script/profile"

  export VAGRANT_CWD="$shome"

  if [[ "$#" == 0 ]]; then
    echo "$(basename "$0"): up|destroy build|remove|add ssh|rsync|scp"
    return 0
  fi

  local nm_action="$1"; shift
  case "$nm_action" in
    ssh|rsync|scp)
      ssh -ti "$shome/.ssh/docker" -o IdentitiesOnly=true -p 2222 ubuntu@localhost "$@"
      ;;
  esac
}

source sub "$BASH_SOURCE" "$@"
